{% extends "base.html" %}
{% block title %}Edit {{ user.username }} - RADIUS Portal{% endblock %}
{% block content %}

<p><a href="{{ url_for('users.index') }}">&larr; Back to users</a></p>

<h2>Edit: {{ user.username }}</h2>

<div class="grid" style="grid-template-columns: 1fr 1fr;">
  <section>
    <h3>Current settings</h3>
    <ul>
      <li><b>Password:</b> {{ "set" if user.password else "—" }}</li>
      <li><b>Expiration:</b> {{ user.expiration or "—" }}</li>
    </ul>
  </section>

  <aside>
    <h3>Set password</h3>
    <form method="post" action="{{ url_for('users.set_password_for_user', username=user.username) }}">
      <label>New password</label>
      <input name="password" required>
      <button type="submit">Update password</button>
    </form>

    <h3>Set expiration</h3>
    <form method="post" action="{{ url_for('users.set_expiration_for_user', username=user.username) }}">
      <label>Expiration (YYYY-MM-DD or YYYY-MM-DD HH:MM:SS)</label>
      <input name="expiration" required>
      <button type="submit">Set expiration</button>
    </form>

    <form method="post" action="{{ url_for('users.clear_expiration_for_user', username=user.username) }}">
      <button type="submit">Clear expiration</button>
    </form>

    <hr>

    <h3>Danger zone</h3>
    <form method="post" action="{{ url_for('users.delete_user_for_user', username=user.username) }}">
      <button class="danger" onclick="return confirm('Delete {{ user.username }}?')">
        Delete user
      </button>
    </form>
  </aside>
</div>

{% endblock %}
